
import { Controller, Get, Post, Body, Patch, Param, Delete } from '@nestjs/common';
import { FormulaireExploitationService, } from './formulaire.service';

import { UpdateQuestionnaireDto, UpdateTrameDto } from './dto/update-formulaire.dto';
import { CreateQuestionnaireExploitationDto, CreateTrameExploitationDto, DiffusionDto } from './dto/create-formulaire.dto';


@Controller('formulaire_Exploitation')
export class FormulaireExploitationController {
  constructor(private readonly formulaireService: FormulaireExploitationService) {}

  @Post('/trame')
  createTrame(@Body() createTrameDto: CreateTrameExploitationDto) {
    return this.formulaireService.onCreateTrame(createTrameDto);
  }

  @Get('/trame')
  findAllTrame() {
    return this.formulaireService.onGetAllTrame();
  }

  @Get('/trame:id')
  findOneTrame(@Param('id') id: string) {
    return this.formulaireService.onGetOneTrame(id);
  }

  
  @Get('/trame/domaine:domaine')
  findCategorieTrame(@Param('domaine') domaine: string) {
    return this.formulaireService.onGetCategorieTrame(domaine);
  }

  @Patch('/trame:id')
  updateTrame(@Param('id') id: string, @Body() updateFormulaireDto: UpdateTrameDto) {
    return this.formulaireService.onUpdateTrame(id, updateFormulaireDto);
  }

  @Delete('/trame:id')
  removeTrame(@Param('id') id: any) {
    return this.formulaireService.onDeleteTrame(id);
  }


    /////////////////////   CONTROLLER DES QUESTIONNAIRES   ://///////////////////////////////


  @Post('/questionnaire')
  createQuestionnaire(@Body() createFormulaireDto: CreateQuestionnaireExploitationDto) {
    return this.formulaireService.onCreateQuestionnaire(createFormulaireDto);
  }

  @Get('/questionnaire')
  findAllQuestionnaire() {
    return this.formulaireService.onGetAllQuestionnaire();
  }

  @Get('/questionnaire:id')
  findOneQuestionnaire(@Param('id') id: string) {
    return this.formulaireService.onGetOneQuestionnaire(id);
  }



  @Patch('/questionnaire:id')
  updateQuestionnaire(@Param('id') id: string, @Body() updateFormulaireDto: UpdateQuestionnaireDto) {
    return this.formulaireService.onUpdateQuestionnaire(id, updateFormulaireDto);
  }

  @Delete('/questionnaire:id')
  removeQuestionnaire(@Param('id') id: any) {
    return this.formulaireService.onDeleteQuestionnaire(id);
  }



  //////////////////////////////////////

   
  @Get('/trame/diffusion:id')
  findDocumentDiffusion(@Param('id') id: string) {
    return this.formulaireService.onGetFormulaireById(id);
  }

  @Post('/diffusion')
  onDiffusion(@Body() diffusionDto: DiffusionDto) {
    return this.formulaireService.onDiffusionTrame(diffusionDto);
  }


}


